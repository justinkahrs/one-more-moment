---
import { Image } from 'astro:assets';

// Import all images from the sponsors directory
const sponsors = import.meta.glob<{ default: ImageMetadata }>('../assets/sponsors/*.{jpeg,jpg,png,gif,svg}', { eager: true });
const sponsorImages = Object.values(sponsors).map(img => img.default);
---

<div class="w-full overflow-hidden bg-base-100 py-12">
    <div class="relative w-full max-w-[100vw]">
        <div class="flex w-max animate-marquee gap-12 items-center">
            {/* First set of images */}
            {sponsorImages.map((img, index) => (
                <div class="flex items-center justify-center w-[150px] h-[80px]">
                    <Image 
                        src={img} 
                        alt={`Sponsor ${index + 1}`} 
                        class="max-w-full max-h-full object-contain grayscale opacity-70 hover:grayscale-0 hover:opacity-100 transition-all duration-300"
                    />
                </div>
            ))}
            {/* Duplicate set for seamless looping */}
            {sponsorImages.map((img, index) => (
                <div class="flex items-center justify-center w-[150px] h-[80px]">
                    <Image 
                        src={img} 
                        alt={`Sponsor ${index + 1}`} 
                        class="max-w-full max-h-full object-contain grayscale opacity-70 hover:grayscale-0 hover:opacity-100 transition-all duration-300"
                    />
                </div>
            ))}
             {/* Duplicate set for seamless looping (extra safety for wide screens) */}
             {sponsorImages.map((img, index) => (
                <div class="flex items-center justify-center w-[150px] h-[80px]">
                    <Image 
                        src={img} 
                        alt={`Sponsor ${index + 1}`} 
                        class="max-w-full max-h-full object-contain grayscale opacity-70 hover:grayscale-0 hover:opacity-100 transition-all duration-300"
                    />
                </div>
            ))}
        </div>
    </div>
</div>

<style>
    @keyframes marquee {
        0% { transform: translateX(0); }
        100% { transform: translateX(-33.33%); }
    }
    .animate-marquee {
        animation: marquee 30s linear infinite;
    }
    /* Pause animation on hover */
    .animate-marquee:hover {
        animation-play-state: paused;
    }
</style>
